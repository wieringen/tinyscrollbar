/*! tinyscrollbar - v2.1.7 - 2014-05-21
 * http://www.baijs.com/tinyscrollbar
 *
 * Copyright (c) 2014 Maarten Baijs <wieringen@gmail.com>;
 * Licensed under the MIT license */

(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){e(require("jquery"))}else{e(jQuery)}})(function(e){"use strict";function r(r,i){function g(){s.update();b();return s}function y(){l.css(m,s.contentPosition/s.trackRatio);u.css(m,-s.contentPosition);a.css(v,s.trackSize);f.css(v,s.trackSize);l.css(v,s.thumbSize)}function b(){if(p){o[0].ontouchstart=function(e){if(1===e.touches.length){e.stopPropagation();w(e.touches[0])}};a[0].ontouchstart=function(e){if(1===e.touches.length){e.stopPropagation();w(e.touches[0])}}}else{l.bind("mousedown",w);f.bind("mousedown",S)}e(window).resize(function(){s.update("relative")});if(s.options.wheel&&window.addEventListener){r[0].addEventListener(d,E,false)}else if(s.options.wheel){r[0].onmousewheel=E}}function w(t){e("body").addClass("noSelect");c=h?t.pageX:t.pageY;s.thumbPosition=parseInt(l.css(m),10)||0;if(p){document.ontouchmove=function(e){e.preventDefault();S(e.touches[0])};document.ontouchend=x}else{e(document).bind("mousemove",S);e(document).bind("mouseup",x);l.bind("mouseup",x)}}function E(t){if(s.contentRatio<1){var n=t||window.event,i="delta"+s.options.axis.toUpperCase(),o=-(n[i]||n.detail||-1/3*n.wheelDelta)/40;s.contentPosition-=o*s.options.wheelSpeed;s.contentPosition=Math.min(s.contentSize-s.viewportSize,Math.max(0,s.contentPosition));r.trigger("move");l.css(m,s.contentPosition/s.trackRatio);u.css(m,-s.contentPosition);if(s.options.wheelLock||s.contentPosition!==s.contentSize-s.viewportSize&&s.contentPosition!==0){n=e.event.fix(n);n.preventDefault()}}}function S(e){if(s.contentRatio<1){var t=h?e.pageX:e.pageY,n=t-c;if(s.options.scrollInvert&&p){n=c-t}var i=Math.min(s.trackSize-s.thumbSize,Math.max(0,s.thumbPosition+n));s.contentPosition=i*s.trackRatio;r.trigger("move");l.css(m,i);u.css(m,-s.contentPosition)}}function x(){e("body").removeClass("noSelect");e(document).unbind("mousemove",S);e(document).unbind("mouseup",x);l.unbind("mouseup",x);document.ontouchmove=document.ontouchend=null}this.options=e.extend({},n,i);this._defaults=n;this._name=t;var s=this,o=r.find(".viewport"),u=r.find(".overview"),a=r.find(".scrollbar"),f=a.find(".track"),l=a.find(".thumb"),c=0,h=this.options.axis==="x",p="ontouchstart"in document.documentElement,d="onwheel"in document||document.documentMode>=9?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll",v=h?"width":"height",m=h?"left":"top";this.contentPosition=0;this.viewportSize=0;this.contentSize=0;this.contentRatio=0;this.trackSize=0;this.trackRatio=0;this.thumbSize=0;this.thumbPosition=0;this.update=function(e){var t=v.charAt(0).toUpperCase()+v.slice(1).toLowerCase();this.viewportSize=o[0]["offset"+t];this.contentSize=u[0]["scroll"+t];this.contentRatio=this.viewportSize/this.contentSize;this.trackSize=this.options.trackSize||this.viewportSize;this.thumbSize=Math.min(this.trackSize,Math.max(0,this.options.thumbSize||this.trackSize*this.contentRatio));this.trackRatio=this.options.thumbSize?(this.contentSize-this.viewportSize)/(this.trackSize-this.thumbSize):this.contentSize/this.trackSize;c=f.offset().top;a.toggleClass("disable",this.contentRatio>=1);switch(e){case"bottom":this.contentPosition=this.contentSize-this.viewportSize;break;case"relative":this.contentPosition=Math.min(Math.max(this.contentSize-this.viewportSize,0),Math.max(0,this.contentPosition));break;default:this.contentPosition=parseInt(e,10)||0}y();return s};return g()}var t="tinyscrollbar",n={axis:"y",wheel:true,wheelSpeed:40,wheelLock:true,scrollInvert:false,trackSize:false,thumbSize:false};e.fn[t]=function(n){return this.each(function(){if(!e.data(this,"plugin_"+t)){e.data(this,"plugin_"+t,new r(e(this),n))}})}});